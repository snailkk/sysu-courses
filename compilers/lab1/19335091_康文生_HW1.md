# <center>Lab1 词法分析器

## <center> （2021 学年春季学期）

## <center>课程名称：编译原理 任课教师：沈成飞

| 年级+班级 | 19级计科（超算）          | 专业（方向） | 计算机科学与技术（超级计算方向） |
| --------- | ------------------------- | ------------ | -------------------------------- |
| 学号      | 19335091                  | 姓名         | 康文生                           |
| Email     | kangwsh@mail2.sysu.edu.cn | 完成日期     | 2022年3月20日                    |

## 目录

[TOC]

### Ⅰ 实验要求

> 1. 实验报告
> 2. C语言的LEX源程序：clang.lex
> 3. C语言词法分析程序C源程序：lex.yy.c
> 4. C语言词法分析程序的可执行文件：clang.out/clang.exe
> 5. C语言源程序文件：demo.c(实验输入)
> 6. 词法分析及结果文件：tokens.txt(实验输出)

### Ⅱ 实验过程

+ token构造

  词法分析过程中，需要从左向右逐行扫描源程序的字符，识别出各个单词，确定单词的类型。

  将识别出的单词转换成统一的机内表示——token形式

  token<种别码，属性值>

  |      | 单词类型 | 种别                                                         | 种别码   |
  | ---- | -------- | ------------------------------------------------------------ | -------- |
  | 1    | 关键字   | if，else，return，break...                                   | 一词一码 |
  | 2    | 标识符   | 变量名，数组名，函数名...                                    | 多词一码 |
  | 3    | 常量     | 整型、浮点型、字符型...                                      | 一型一码 |
  | 4    | 运算符   | 算数运算符（+，-，*，\）、关系运算符（>,<,==,!=）、逻辑运算符（&&，\|\|，！） | 一型一码 |
  | 5    | 界限符   | ；() = {} ,...                                               | 一词一码 |

  **其中对于多词一码和一型一码我们需要标注其属性值**

+ 根据以上token构造原则定义以下语法符号的类别码和部分正则表达式：

  其中正则表达式满足flex工具所定义语法。

  | 单词符号类型                               | 类别码      | 正则表达式                                 |
  | ------------------------------------------ | ----------- | ------------------------------------------ |
  | int                                        | INT         |                                            |
  | float                                      | FLOAT       |                                            |
  | char                                       | CHAR        |                                            |
  | break                                      | BREAK       |                                            |
  | continue                                   | CONTINUE    |                                            |
  | if                                         | IF          |                                            |
  | else                                       | ELSE        |                                            |
  | return                                     | RETURN      |                                            |
  | do                                         | DO          |                                            |
  | while                                      | WHILE       |                                            |
  | for                                        | FOR         |                                            |
  | {idn}(标识符)                              | IDN         | \[A-Za-z][A-Za-z0-9]*                      |
  | {int}(int字面常量)                         | CONST_INT   | \[0-9]+                                    |
  | {float}(浮点字面常量)                      | CONST_FLOAT | (\[0-9]*\.[0-9]+)\|([0-9]+\.)              |
  | ">"\|"<"\|">="\|"<="\|"=="\|"!="           | REL_OP      | ">"\|"<"\|">="\|"<="\|"=="\|"!="           |
  | "+"\|"-"\|"+="\|"-="\|"++"\|"--"\|"*"\|"/" | AR_OP       | "+"\|"-"\|"+="\|"-="\|"++"\|"--"\|"*"\|"/" |
  | "&&"\|"\|\|"\|"!"                          | LOGIC_OP    | "&&"\|"\|\|"\|"!"                          |
  | ";"                                        | SEMI        |                                            |
  | ","                                        | COMMA       |                                            |
  | "="                                        | ASSIGN      |                                            |
  | "("                                        | LP          |                                            |
  | ")"                                        | RP          |                                            |
  | "["                                        | SLP         |                                            |
  | "]"                                        | SRP         |                                            |
  | "{"                                        | BLP         |                                            |
  | "}"                                        | BRP         |                                            |
  | 换行符                                     |             | [\n]                                       |
  | 空格等隐藏符                               |             | [ \r\t]                                    |
  | 单行注释                                   |             | \/\/\[^\n]*                                |
  | 多行注释                                   |             | \/\*(\s\|.)*?\*\/                          |